{% extends "base.html" %}

{% block title %}TRAVEL MATE{% endblock %}

{% block content %}

<div class="container-fluid text-center heading">
    <video src="{{ url_for('static', filename='videos/video4.mp4') }}" autoplay muted loop id="myVideo"></video>
    <h1 class="h1" data-aos="fade-up" data-aos-delay="300">Welcome to the <span></span>TRAVEL MATE</h1>
    <h3 class="h3" style="color:white" data-aos="fade-up" data-aos-delay="300">
        Create memories. Explore cultures. Live your adventure.
    </h3>
    <a href="./contact.html" class="btn btn1">Register</a>
    <a href="./portforlio.html" class="btn btn2">Explore</a>
</div>

<!------------------Blog Page----------------------------------------->
<section class="container">
    <div class="site-content">
        <div class="posts">
            {% for blog in blogs %}
            <div class="post-content" data-aos="zoom-in" data-aos-delay="200">
                <div class="post-image">
                    {% if blog.images is iterable %}
                        {% for image in blog.images %}
                        <div>
                            <img src="{{ image }}" alt="{{ blog.title }}">
                        </div>
                        {% endfor %}
                    {% else %}
                        <div>
                            <img src="{{ blog.images }}" alt="{{ blog.title }}">
                        </div>
                    {% endif %}
                    <div class="post-info flex-row">
                        <span><i class="fas fa-user text-gray"></i> &nbsp;&nbsp; {{ blog.author }}</span>
                        <span><i class="fas fa-calendar-alt text-gray"></i>&nbsp;&nbsp; {{ blog.date }}</span>
                        <span>2 comments </span>
                    </div>
                </div>
                <div class="post-title">
                    <a href="{{ url_for('blog_detail', blog_id=blog.id) }}">{{ blog.title }}</a>
                    <p>
                        {{ blog.story[:120] }}
                        <span id="dots-{{ blog.id }}">.......</span>
                        <span id="more-{{ blog.id }}">{{ blog.story[120:] }}</span>
                    </p>
                    <a href="{{ url_for('blog_detail', blog_id=blog.id) }}" class="read-btn">
                        Read More &nbsp;<i class="fas fa-arrow-right"></i>
                    </a>

                </div>
            </div>
            <hr>
            {% endfor %}

            <!-- Pagination -->
            <div class="pagination flex-row">
                {% if prev_page %}
                <a href="{{ url_for('locations', page=prev_page) }}"><i class="fas fa-chevron-left"></i></a>
                {% else %}
                <span class="disabled"><i class="fas fa-chevron-left"></i></span>
                {% endif %}

                {% for p in range(1, total_pages + 1) %}
                    {% if p == current_page %}
                        <span class="pages current">{{ p }}</span>
                    {% else %}
                        <a href="{{ url_for('locations', page=p) }}" class="pages">{{ p }}</a>
                    {% endif %}
                {% endfor %}

                {% if next_page %}
                <a href="{{ url_for('locations', page=next_page) }}"><i class="fas fa-chevron-right"></i></a>
                {% else %}
                <span class="disabled"><i class="fas fa-chevron-right"></i></span>
                {% endif %}
            </div>
        </div>

       <!-- Sidebar -->
            <aside class="sidebar">
                <div class="popular-post">
                    <h2>Popular Post</h2>
                    {% for sidebar_post in sidebar_posts %}
                    <div class="post-content" data-aos="flip-up" data-aos-delay="{{ loop.index0 * 100 + 200 }}">
                        <p class="blog-meta">By {{ sidebar_post.author }} <span>{{ sidebar_post.date }}</span></p>
                      <img src="{{ sidebar_post.images[0] }}" alt="{{ sidebar_post.title }}">
                        <h2>{{ sidebar_post.title }}</h2>
                        <p class="blog-text">{{ sidebar_post.story[:100] }}...</p>
                        <p>
                            <a href="{{ url_for('blog_detail', blog_id=sidebar_post.id) }}" class="read-more-btn">Read More</a>
                            <span><i class="fas fa-thumbs-up"></i> {{ sidebar_post.likes }} people like, 
                                <i class="fas fa-comments"></i> {{ sidebar_post.comments }} comments</span>
                        </p>
                    </div>
                    {% endfor %}
                </div>

            <div class="newsletter" data-aos="fade-up" data-aos-delay="300">
                <h2> Newsletter</h2>
                <div class="form-element">
                    <input type="text" class="input-element" placeholder="Email">
                    <button class="btn form-btn">Subscribe</button>
                </div>
            </div>

            <div class="popular-tags">
                <h2>Popular Tags</h2>
                <div class="tags flex-row">
                    {% for tag in tags %}
                    <span class="tag">{{ tag }}</span>
                    {% endfor %}
                </div>
            </div>
        </aside>
    </div>
</section>

{% endblock %}

<script>
function toggleRead(id) {
    const dots = document.getElementById(`dots-${id}`);
    const more = document.getElementById(`more-${id}`);
    const btn = document.getElementById(`post-btn-${id}`);
    if (!dots || !more || !btn) return;

    if (more.style.display === "none" || more.style.display === "") {
        dots.style.display = "none";
        more.style.display = "inline";
        btn.innerHTML = "Read Less &nbsp;<i class='fas fa-arrow-left'></i>";
    } else {
        dots.style.display = "inline";
        more.style.display = "none";
        btn.innerHTML = "Read More &nbsp;<i class='fas fa-arrow-right'></i>";
    }
}
</script>
